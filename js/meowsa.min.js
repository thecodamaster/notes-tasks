/**!
 * Meowsa - Growl-style Web Notifications
 * @version		v 1.0
 * @date		January 2016
 *
 * Copyright 2015-2016 Jennifer Perrin
 * Released under the MIT license
 **/
!function(t,i){"use strict";function e(){var t="",i="abcdefghijklmnopqrstuvwxyz0123456789";do{t="";for(var e=0;5>e;e++)t+=i.charAt(Math.floor(Math.random()*i.length))}while(m.exists(t));return t}function n(i){var e=i.target?i.target:i.toElement;if("meowsa-wrapper"!==e.getAttribute("id")){for(var n=!1;!c(e,"meowsa-notification");)c(e,"meowsa-close")&&(n=!0),c(e,"btn-close-notification")&&(n=!0),e=e.parentElement;var o=e.getAttribute("id");if(o=/meowsa-notification-([a-zA-Z0-9]+)/.exec(o)[1],n&&m.notifications[o].options.dismissable)m.removeNotification(o);else{var a=m.notifications[o].action;if(void 0===a||null===a)return;"string"==typeof a?t.location=a:"function"==typeof a?a(o):(console.log("Meowsa Error: Invalid click action:"),console.log(a))}}}function o(t){if(void 0===m.notifications[t]&&(m.notifications[t]={}),null===m.notifications[t].element||void 0===m.notifications[t].element){var e=u.cloneNode(!0);s(e,"meowsa-notification"),e.setAttribute("id","meowsa-notification-"+t),m.notifications[t].element=e}if(null===m.notifications[t].element.parentElement){var n=i.getElementById("meowsa-wrapper");i.body.clientWidth>480?n.appendChild(m.notifications[t].element):n.insertBefore(m.notifications[t].element,n.firstChild)}}function a(t,i){var e,n={};for(e in t)n[e]=t[e];for(e in i)n[e]=i[e];return n}function s(t,i){c(t,i)||(t.className+=" "+i)}function c(t,i){var e=new RegExp("(?:^|\\s)"+i+"(?!\\S)","g");return null!==t.className.match(e)}function r(t,i){var e=new RegExp("(?:^|\\s)"+i+"(?!\\S)","g");t.className=t.className.replace(e,"")}function l(){return"ontouchstart"in t||"onmsgesturechange"in t}function f(){var t=i.createElement("div");t.setAttribute("id","meowsa-wrapper"),t.addEventListener("click",n),i.body.appendChild(t),m.setNotificationHTML('<div class="meowsa-notification"><div class="meowsa-icon"></div><h3 class="meowsa-title"></h3><p class="meowsa-text"></p><p class="meowsa-button"></p><div class="meowsa-close"><i class="fa fa-times"></i></div></div>')}var m=m||{};m={count:0,notifications:{},defaultOptions:{color:"default",title:"",text:"",icon:"",timeout:5e3,action:null,button:null,dismissable:!0},setDefaultOptions:function(t){m.defaultOptions=a(m.defaultOptions,t)},setNotificationHTML:function(t){var e=i.createElement("div");e.innerHTML=t;var n=e.firstChild;e.removeChild(n),u=n},addNotification:function(t){m.count+=1;var i=e();return o(i),m.editNotification(i,t),i},editNotification:function(t,i){null!==m.notifications[t].removeTimer&&(clearTimeout(m.notifications[t].removeTimer),m.notifications[t].removeTimer=null),o(t),i=i||{},void 0===m.notifications[t].options&&(m.notifications[t].options=m.defaultOptions),i=a(m.notifications[t].options,i);var e=m.notifications[t].element;s(e,i.color);var n=e.getElementsByClassName("meowsa-title")[0];i.title?(n.textContent=i.title,r(e,"meowsa-no-title")):(n.textContent="",s(e,"meowsa-no-title"));var c=e.getElementsByClassName("meowsa-text")[0];i.text?(c.textContent=i.text,r(e,"meowsa-no-text")):(c.textContent="",s(e,"meowsa-no-text"));var f=e.getElementsByClassName("meowsa-icon")[0];i.icon?(f.innerHTML=i.icon,r(e,"meowsa-no-icon")):(f.innerHTML="",s(e,"meowsa-no-icon")),null!==i.timer&&clearTimeout(m.notifications[t].timer);var u=null;null!==i.timeout&&(u=setTimeout(function(){m.removeNotification(t)},i.timeout)),m.notifications[t].timer=u,m.notifications[t].action=i.action;var d=e.getElementsByClassName("meowsa-button")[0];i.button?d.innerHTML=i.button:d.innerHTML="",i.dismissable?r(e,"not-dismissable"):s(e,"not-dismissable"),setTimeout(function(){s(e,"meowsa-in"),e.removeAttribute("style")},0),l()&&s(e,"no-hover"),m.notifications[t].options=i},reOpenNotification:function(t){m.editNotification(t)},removeNotification:function(t){if(m.isDismissed(t))return!1;var e=m.notifications[t].element;return r(e,"meowsa-in"),i.body.clientWidth>480?e.style.marginBottom=-e.offsetHeight+"px":e.style.marginTop=-e.offsetHeight+"px",m.notifications[t].removeTimer=setTimeout(function(){e.parentElement.removeChild(e)},500),clearTimeout(m.notifications[t].timer),!0},isDismissed:function(t){return m.exists(t)?null===m.notifications[t].element.parentElement:!0},exists:function(t){return void 0!==m.notifications[t]},setTitle:function(t,i){m.editNotification(t,{title:i})},setText:function(t,i){m.editNotification(t,{text:i})},setIcon:function(t,i){m.editNotification(t,{icon:i})},setTimeout:function(t,i){m.editNotification(t,{timeout:i})}};var u=null;!function(){"complete"===i.readyState||"interactive"===i.readyState&&i.body?f():i.addEventListener?i.addEventListener("DOMContentLoaded",function(){i.removeEventListener("DOMContentLoaded",null,!1),f()},!1):i.attachEvent&&i.attachEvent("onreadystatechange",function(){"complete"===i.readyState&&(i.detachEvent("onreadystatechange",null),f())})}(),t.Meowsa=m}(window,document);